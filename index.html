<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dua Lipa — Fan Page (Radical Optimism & Live from the Royal Albert Hall)</title>
<link rel="icon" href="Dua_Lipa.jpg" type="image/x-icon">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#070809;
    --card:#1e2430;
    --muted:#cfcfcf;
    --radical:#0f8fb0; /* blue-ish for Radical Optimism */
    --live:#a33a3a; /* dark red for Live */
  }
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{height:100%;font-family:"Inter",sans-serif, "Poppins", sans-serif;background:var(--bg);color:#fff;-webkit-font-smoothing:antialiased;overflow-x:hidden}
  a{color:inherit}
  /* Header */
  .container{max-width:1200px;margin:0 auto;padding:28px}
  header.main{display:flex;gap:28px;align-items:flex-start;padding:28px;border-radius:16px;background:linear-gradient(180deg, rgba(10,10,12,0.9), rgba(4,4,6,0.9));box-shadow:0 12px 40px rgba(0,0,0,0.6);margin-bottom:28px}
  header.main img.hero{width:220px;height:220px;border-radius:16px;object-fit:cover;flex-shrink:0;box-shadow:0 12px 40px rgba(0,0,0,0.6)}
  header.main .meta{flex:1;min-width:0}
  header.main h1{font-size:2rem;margin-bottom:8px}
  header.main p{color:#d7d7d7;line-height:1.6}
  .cta-row{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}
  .btn{ background:#40E0D0;color:#042b2b;padding:10px 14px;border-radius:10px;border:0;font-weight:700;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,0.45); }
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#ddd}

  /* Albums grid */
  .albums-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin:28px 0}
  .card{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px;padding:0;overflow:hidden;cursor:pointer;transition:transform .18s, box-shadow .18s; box-shadow:0 8px 30px rgba(0,0,0,0.5); }
  .card:hover{transform:translateY(-6px)}
  .card img{width:100%;height:220px;object-fit:cover;display:block}
  .card .card-body{padding:14px}
  .card h3{font-size:1.05rem;margin-bottom:8px}
  .card p{color:#cfcfcf;font-size:0.95rem;line-height:1.5}

  /* Album page */
  .album-page{display:none;padding:22px 0 80px}
  .album-page.active{display:block;animation:fadeIn .36s ease both}
  .back{display:inline-block;margin-bottom:18px;background:#ff6b6b;border:0;padding:10px 14px;border-radius:10px;color:#fff;font-weight:800;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,0.45)}
  .album-header{display:flex;gap:18px;align-items:center;margin-bottom:18px;flex-wrap:wrap}
  .album-header img{width:160px;height:160px;border-radius:12px;object-fit:cover;box-shadow:0 12px 36px rgba(0,0,0,.5)}
  .album-header h2{font-size:1.5rem}
  .album-desc{color:#d9d9d9;max-width:900px;line-height:1.6;margin-top:6px}

  /* tracklist / mini player */
  .tracklist{max-width:980px;margin-top:18px;padding:16px;border-radius:12px;background:rgba(255,255,255,0.02);box-shadow:inset 0 1px 0 rgba(255,255,255,0.01)}
  .track{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;margin-bottom:10px;transition:0.16s;cursor:pointer}
  .track:hover{transform:translateY(-4px);background:rgba(255,255,255,0.03)}
  .track .num{width:36px;text-align:center;color:#aaa;font-weight:800}
  .track .title{font-weight:700;color:#fff;flex:1;padding-left:12px}
  .track .duration{color:#aaa;font-weight:700}

  /* mini player fixed */
  #mini-player{position:fixed;left:12px;right:12px;bottom:12px;padding:12px;border-radius:12px;display:flex;align-items:center;justify-content:space-between;gap:12px;box-shadow:0 12px 36px rgba(0,0,0,.5);display:none;z-index:1500}
  /* we'll change background dynamically */
  .mini-left{display:flex;align-items:center;gap:12px}
  .mini-cover{width:66px;height:66px;border-radius:8px;object-fit:cover;box-shadow:0 8px 24px rgba(0,0,0,.4)}
  .mini-title{font-weight:800;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px}
  .mini-controls{display:flex;align-items:center;gap:8px}
  .mini-controls button{width:40px;height:40px;border-radius:50%;border:0;background:#042b2b;color:#fff;font-size:18px;cursor:pointer}

  /* fullscreen player modal (shared) */
  #fullscreen-player{position:fixed;inset:0;display:none;z-index:2000;align-items:flex-end;justify-content:flex-end;overflow:hidden}
  #fullscreen-player .overlay{position:absolute;inset:0;background:rgba(0,0,0,0.6);backdrop-filter:blur(6px)}
  #fullscreen-player .fs-inner{position:relative;width:100%;padding:28px;background:linear-gradient(90deg, rgba(64,224,208,0.08), rgba(15,79,84,0.08));border-top-left-radius:18px;border-top-right-radius:18px;box-shadow:0 -12px 60px rgba(0,0,0,0.6);z-index:2100}
  .fs-controls{display:flex;align-items:center;gap:12px;justify-content:space-between;flex-wrap:wrap}
  .fs-left{display:flex;gap:12px;align-items:center;min-width:0}
  .fs-cover{width:72px;height:72px;border-radius:10px;object-fit:cover}
  .fs-title{font-weight:900;font-size:1.4rem;max-width:60vw;word-break:break-word}
  .fs-time{font-weight:800}
  .progress-wrap{width:100%;margin-top:12px}
  .progress-bar{width:100%;height:12px;background:rgba(255,255,255,0.07);border-radius:10px;overflow:hidden;cursor:pointer}
  .progress-fill{height:100%;width:0;background:#40E0D0;border-radius:10px;transition:width .06s linear}

  /* close button */
  .fs-close{position:absolute;top:14px;right:18px;background:rgba(0,0,0,0.6);border:0;color:#fff;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer;z-index:2200}
  .fs-close.red{background:rgba(163,58,58,0.9)}
  .fs-close.blue{background:rgba(15,143,176,0.9)}

  /* small screens */
  @media (max-width:720px){
    .header{flex-direction:column;align-items:center;text-align:center;padding:20px}
    .albums-grid{gap:12px}
    #fullscreen-player .fs-inner{padding:18px}
    .fs-title{max-width:100%}
  }

  /* animation */
  .fade-in{animation:fadeIn .35s ease both}
  @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

  /* subtle footer */
  footer{max-width:1200px;margin:28px auto 80px;padding:18px;color:#bdbdbd;text-align:center}
  footer small{display:block;color:#9b9b9b;margin-top:6px}
</style>
</head>
<body>
  <div class="container">

    <!-- ===== HEADER / INTRO ====== -->
    <header class="main">
      <img class="hero" src="Dua_Lipa.jpg" alt="Dua Lipa">
      <div class="meta">
        <h1>Dua Lipa</h1>
        <p>
          Dua Lipa (nar. 22. srpna 1995) je britská zpěvačka a skladatelka albánského původu, která se proslavila svým unikátním mixem tanečního popu, disco a moderní elektroniky. 
          Její tvorba kombinuje silné melodie, taneční rytmy a výraznou vizuální estetiku. Níže najdeš dvě podrobné sekce — <strong>Radical Optimism (2024)</strong> a <strong>Live from the Royal Albert Hall (2024)</strong> — s kompletními tracklisty (MP3 + MP4), přehrávačem a vizuálním dokončením.
        </p>

        <div class="cta-row">
          <button class="btn" onclick="scrollToSection('albums')">Prohlédnout alba</button>
          <button class="btn secondary" onclick="openExternal()">Oficiální web</button>
        </div>
      </div>
    </header>

    <!-- ====== ALBUMS MENU ====== -->
    <section id="albums" class="albums-grid" style="margin-top:18px">
      <article class="card" onclick="openAlbum('radical')">
        <img src="radical_optimism.jpg" alt="Radical Optimism">
        <div class="card-body">
          <h3>Radical Optimism</h3>
          <p>Třetí studiové album Dua Lipy (vydáno 3. května 2024). Moderní retro-disco, mořská estetika a silné osobní texty.</p>
        </div>
      </article>

      <article class="card" onclick="openAlbum('live')">
        <img src="Live_from_the_Royal_Albert_Hall.jfif" alt="Live from the Royal Albert Hall">
        <div class="card-body">
          <h3>Live from the Royal Albert Hall</h3>
          <p>Živé album nahrané 27. října 2024 — koncertní záznam s bohatými orchestrálními aranžemi.</p>
        </div>
      </article>
    </section>

    <!-- ====== RADICAL OPTIMISM PAGE ====== -->
    <section id="page-radical" class="album-page">
      <button class="back" onclick="closeAlbum()">← Zpět</button>
      <div class="album-header">
        <img src="radical_optimism.jpg" alt="Radical Optimism">
        <div>
          <h2>Radical Optimism (2024)</h2>
          <div class="album-desc">
            <p>
              Radical Optimism je třetí studiové album Dua Lipy — svěží disco-pop s vícevrstevnými aranžemi.
              Projekt navazuje na retro-disco atmosféru, ale s moderním nádechem a svěžím zvukem. Album se zabývá osobním růstem,
              sebevědomím a emocemi, které přicházejí se ztrátami i vítězstvími. Vizuálně i zvukově odráží mořskou symboliku — představuje klid,
              sílu a vyrovnanost.
            </p>
          </div>
        </div>
      </div>

      <div class="tracklist" id="tracklist-radical"></div>
    </section>

    <!-- ====== LIVE FROM THE ROYAL ALBERT HALL PAGE ====== -->
    <section id="page-live" class="album-page">
      <button class="back" onclick="closeAlbum()">← Zpět</button>
      <div class="album-header">
        <img src="Live_from_the_Royal_Albert_Hall.jfif" alt="Live from the Royal Albert Hall">
        <div>
          <h2>Live from the Royal Albert Hall (2024)</h2>
          <div class="album-desc">
            <p>
              Živý záznam Dua Lipy s orchestry a živou kapelou. Tento koncertní set zachycuje energii a atmosféru vystoupení
              v legendárním Royal Albert Hall s bohatými orchestrálními aranžemi a pečlivě vybranými skladbami z její diskografie.
            </p>
          </div>
        </div>
      </div>

      <div class="tracklist" id="tracklist-live"></div>
    </section>

  </div> <!-- container end -->

  <!-- MINI PLAYER (global) -->
  <div id="mini-player" style="display:none">
    <div class="mini-left">
      <img id="mini-cover" class="mini-cover" src="radical_optimism.jpg" alt="cover">
      <div>
        <div id="mini-title" class="mini-title">—</div>
        <div id="mini-time" style="color:#eafafa;font-weight:700">0:00 / 0:00</div>
      </div>
    </div>
    <div class="mini-controls">
      <button id="mini-prev">⏮</button>
      <button id="mini-play">▶</button>
      <button id="mini-next">⏭</button>
      <button id="mini-expand">⬆</button>
    </div>
  </div>

  <!-- FULLSCREEN PLAYER / VIDEO MODAL -->
  <div id="fullscreen-player" aria-hidden="true">
    <div class="overlay" onclick="closeFullscreen()"></div>
    <div class="fs-inner">
      <button id="fs-close" class="fs-close">✖</button>
      <div class="fs-controls">
        <div class="fs-left">
          <img id="fs-cover" class="fs-cover" src="radical_optimism.jpg" alt="cover">
          <div>
            <div id="fs-title" class="fs-title">—</div>
            <div id="fs-sub" style="color:#cfcfcf;font-weight:600;margin-top:6px">Album</div>
          </div>
        </div>

        <div style="display:flex;align-items:center;gap:12px">
          <div id="time-big" class="fs-time">0:00 / 0:00</div>
          <div class="controls">
            <button id="prev-btn" class="btn">⏮</button>
            <button id="play-btn" class="btn">▶</button>
            <button id="next-btn" class="btn">⏭</button>
          </div>
        </div>
      </div>

      <div class="progress-wrap">
        <div id="progress-bar" class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
      </div>

      <!-- video element shown when mp4 exists -->
      <div style="margin-top:14px;">
        <video id="fs-video" style="width:100%;max-height:55vh;border-radius:12px;background:#000" controls playsinline></video>
      </div>
    </div>
  </div>

  <footer>
    <small>© 2024 Dua Lipa — fan page (neoficiální). Všechna autorská práva k nahrávkám a videím náleží jejich vlastníkovům.</small>
  </footer>

<script>
/* ============================
   Data: tracklists (you gave these)
   - Radical: mp3 + mp4
   - Live: mp3 + mp4
   ============================ */

const radicalTracks = [
  {num:1,title:"End Of An Era",mp3:"mech.mp3",mp4:"a82x20.mp4",duration:"3:15"},
  {num:2,title:"Houdini",mp3:"kouzelník.mp3",mp4:"a82xf4.mp4",duration:"3:08"},
  {num:3,title:"Training Season",mp3:"60m.mp3",mp4:"a82xvv.mp4",duration:"3:46"},
  {num:4,title:"These Walls",mp3:"zeď.mp3",mp4:"a82xxp.mp4",duration:"3:37"},
  {num:5,title:"Whatcha Doing",mp3:"Co.mp3",mp4:"a82ywb.mp4",duration:"3:17"},
  {num:6,title:"French Exit",mp3:"Francosisch.mp3",mp4:"a82yxv.mp4",duration:"3:21"},
  {num:7,title:"Illusion",mp3:"Iluze.mp3",mp4:"a82zdu.mp4",duration:"3:09"},
  {num:8,title:"Falling Forever",mp3:"Padat.mp3",mp4:"a82zjs.mp4",duration:"3:42"},
  {num:9,title:"Anything For Love",mp3:"Láska.mp3",mp4:"a82zlw.mp4",duration:"2:21"},
  {num:10,title:"Maria",mp3:"Marie.mp3",mp4:"a82zxw.mp4",duration:"3:07"},
  {num:11,title:"Happy For You",mp3:"Pro tebe.mp3",mp4:"a83003.mp4",duration:"4:04"}
];

const liveTracks = [
  {num:1,title:"Overture (Live from the Royal Albert Hall)",mp3:"uvod.mp3",mp4:"a892zo.mp4",duration:"1:47"},
  {num:2,title:"End Of An Era (Live from the Royal Albert Hall)",mp3:"era.mp3",mp4:"a8947k.mp4",duration:"4:00"},
  {num:3,title:"Houdini (Live from the Royal Albert Hall)",mp3:"kuzelnik.mp3",mp4:"a88wpd.mp4",duration:"3:37"},
  {num:4,title:"Training Season (Live from the Royal Albert Hall)",mp3:"100m.mp3",mp4:"a88y8r.mp4",duration:"3:41"},
  {num:5,title:"These Walls (Live from the Royal Albert Hall)",mp3:"zdi.mp3",mp4:"a89cke.mp4",duration:"3:51"},
  {num:6,title:"Whatcha Doing (Live from the Royal Albert Hall)",mp3:"what.mp3",mp4:"breakheart.mp4",duration:"3:59"},
  {num:7,title:"French Exit (Live from the Royal Albert Hall)",mp3:"francois.mp3",mp4:"dontstart.mp4",duration:"3:46"},
  {num:8,title:"Illusion (Live from the Royal Albert Hall)",mp3:"illuze.mp3",mp4:"a89isb.mp4",duration:"3:58"},
  {num:9,title:"Falling Forever (Live from the Royal Albert Hall)",mp3:"navždy.mp3",mp4:"idgaf.mp4",duration:"4:01"},
  {num:10,title:"Anything For Love (Live from the Royal Albert Hall)",mp3:"pro.mp3",mp4:"hotter.mp4",duration:"3:10"},
  {num:11,title:"Maria (Live from the Royal Albert Hall)",mp3:"babi.mp3",mp4:"a89ovs.mp4",duration:"3:46"},
  {num:12,title:"Happy For You (Live from the Royal Albert Hall)",mp3:"tebe.mp3",mp4:"blowyourmind.mp4",duration:"4:24"},
  {num:13,title:"Love Again (Live from the Royal Albert Hall)",mp3:"znovu.mp3",mp4:"a8d9nu.mp4",duration:"6:03"},
  {num:14,title:"Pretty Please (Live from the Royal Albert Hall)",mp3:"prosím.mp3",mp4:"blowyourmind.mp4",duration:"3:26"},
  {num:15,title:"Levitating (Live from the Royal Albert Hall)",mp3:"levitovat.mp3",mp4:"blowyourmind.mp4",duration:"4:25"},
  {num:16,title:"Sunshine (Live from the Royal Albert Hall)",mp3:"slunce.mp3",mp4:"blowyourmind.mp4",duration:"4:43"},
  {num:17,title:"Cold Heart (featuring: Elton John) (Live from the Royal Albert Hall)",mp3:"srdce.mp3",mp4:"blowyourmind.mp4",duration:"5:29"},
  {num:18,title:"Be The One (Live from the Royal Albert Hall)",mp3:"pravý.mp3",mp4:"pravý.mp4",duration:"4:50"},
  {num:19,title:"Dance The Night (Live from the Royal Albert Hall)",mp3:"barbie.mp3",mp4:"barbie.mp4",duration:"4:08"},
  {num:20,title:"Don’t Start Now (Live from the Royal Albert Hall)",mp3:"teď.mp3",mp4:"teď.mp4",duration:"4:26"}
];

/* ====== renderers ====== */
function renderTracklist(list, containerId, albumKey){
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  list.forEach((t, idx) => {
    const div = document.createElement("div");
    div.className = "track fade-in";
    div.dataset.index = idx;
    div.innerHTML = `
      <div style="display:flex;align-items:center;gap:8px">
        <div class="num">${t.num}</div>
        <div class="title">${t.title}</div>
      </div>
      <div class="duration">${t.duration}</div>
    `;
    div.addEventListener("click", () => playFromAlbum(albumKey, idx));
    container.appendChild(div);
  });
}

renderTracklist(radicalTracks, "tracklist-radical", "radical");
renderTracklist(liveTracks, "tracklist-live", "live");

/* ====== navigation ====== */
function openAlbum(id){
  document.querySelectorAll('.album-page').forEach(p=>p.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
  // set theme accent for the page (optional)
  if(id==='radical'){
    document.querySelector('#page-radical .album-header').style.borderLeft = "4px solid var(--radical)";
  } else {
    document.querySelector('#page-live .album-header').style.borderLeft = "4px solid var(--live)";
  }
}
function closeAlbum(){
  document.querySelectorAll('.album-page').forEach(p=>p.classList.remove('active'));
  document.getElementById('albums').scrollIntoView({behavior:'smooth'});
}
function scrollToSection(id){ document.getElementById(id).scrollIntoView({behavior:'smooth'}); }
function openExternal(){ window.open("https://www.dualipa.com","_blank"); }

/* ====== Player state ====== */
let audio = new Audio();
audio.preload = "metadata";
let currentAlbum = null; // "radical" or "live"
let currentIndex = 0;

// UI elements
const miniPlayer = document.getElementById('mini-player');
const miniTitle = document.getElementById('mini-title');
const miniCover = document.getElementById('mini-cover');
const miniPlay = document.getElementById('mini-play');
const miniPrev = document.getElementById('mini-prev');
const miniNext = document.getElementById('mini-next');
const miniExpand = document.getElementById('mini-expand');
const miniTime = document.getElementById('mini-time');

const fs = document.getElementById('fullscreen-player');
const fsInner = fs.querySelector('.fs-inner');
const fsTitle = document.getElementById('fs-title');
const fsCover = document.getElementById('fs-cover');
const fsSub = document.getElementById('fs-sub');
const fsVideo = document.getElementById('fs-video');
const fsClose = document.getElementById('fs-close');
const prevBtn = document.getElementById('prev-btn');
const playBtn = document.getElementById('play-btn');
const nextBtn = document.getElementById('next-btn');
const progressBar = document.getElementById('progress-bar');
const progressFill = document.getElementById('progress-fill');
const timeBig = document.getElementById('time-big');

/* Utility to pick list */
function getAlbumList(name){
  return name === 'radical' ? radicalTracks : liveTracks;
}

/* Play logic: chooses mp3 and sets mp4 if exists */
function playFromAlbum(albumName, idx){
  currentAlbum = albumName;
  currentIndex = idx;
  const list = getAlbumList(albumName);
  const t = list[idx];
  // set audio
  audio.src = t.mp3;
  audio.play().catch(()=>{ /* autoplay blocked until user interacts */ });
  // update mini UI
  miniPlayer.style.display = 'flex';
  miniTitle.textContent = t.title;
  miniCover.src = albumName === 'radical' ? 'radical_optimism.jpg' : 'Live_from_the_Royal_Albert_Hall.jfif';
  // set fullscreen UI
  fsTitle.textContent = t.title;
  fsSub.textContent = albumName === 'radical' ? 'Radical Optimism' : 'Live from the Royal Albert Hall';
  fsCover.src = albumName === 'radical' ? 'radical_optimism.jpg' : 'Live_from_the_Royal_Albert_Hall.jfif';
  // set modal theme color and close button style
  const closeBtn = document.getElementById('fs-close');
  if(albumName === 'radical'){
    progressFill.style.background = 'var(--radical)';
    miniPlayer.style.background = 'linear-gradient(90deg,var(--radical), rgba(4,79,86,0.95))';
    closeBtn.classList.remove('red'); closeBtn.classList.add('blue');
  } else {
    progressFill.style.background = 'var(--live)';
    miniPlayer.style.background = 'linear-gradient(90deg,var(--live), #2b1212)';
    closeBtn.classList.remove('blue'); closeBtn.classList.add('red');
  }
  // set background video if mp4 exists
  if(t.mp4){
    try {
      fsVideo.src = t.mp4;
      fsVideo.load();
    } catch(e){
      fsVideo.removeAttribute('src');
    }
  } else {
    fsVideo.removeAttribute('src');
    fsVideo.pause();
  }
  updateControls();
}

/* play next / prev */
function playNext(){
  const list = getAlbumList(currentAlbum || 'radical');
  currentIndex = (currentIndex + 1) % list.length;
  playFromAlbum(currentAlbum || 'radical', currentIndex);
}
function playPrev(){
  const list = getAlbumList(currentAlbum || 'radical');
  currentIndex = (currentIndex - 1 + list.length) % list.length;
  playFromAlbum(currentAlbum || 'radical', currentIndex);
}

/* mini controls */
miniPlay.addEventListener('click', togglePlay);
miniPrev.addEventListener('click', playPrev);
miniNext.addEventListener('click', playNext);
miniExpand.addEventListener('click', openFullscreen);
playBtn.addEventListener('click', togglePlay);
prevBtn.addEventListener('click', playPrev);
nextBtn.addEventListener('click', playNext);
fsClose.addEventListener('click', closeFullscreen);

/* audio events */
audio.addEventListener('timeupdate', () => {
  const c = audio.currentTime || 0;
  const d = audio.duration || 0;
  const format = (t) => {
    if(isNaN(t) || !isFinite(t)) return '0:00';
    const m = Math.floor(t/60), s = Math.floor(t%60);
    return `${m}:${s<10? '0'+s : s}`;
  };
  const formatted = `${format(c)} / ${format(d)}`;
  timeBig.textContent = formatted;
  miniTime.textContent = formatted;
  progressFill.style.width = d ? ((c/d)*100) + '%' : '0%';
});
audio.addEventListener('ended', () => {
  // try play next track in same album
  playNext();
});
audio.addEventListener('play', updateControls);
audio.addEventListener('pause', updateControls);

function togglePlay(){
  if(audio.paused){
    audio.play().catch(()=>{});
  } else {
    audio.pause();
  }
  updateControls();
}
function updateControls(){
  miniPlay.textContent = audio.paused ? '▶' : '⏸';
  playBtn.textContent = audio.paused ? '▶' : '⏸';
}

/* fullscreen modal open/close */
function openFullscreen(){
  // show modal and set video source (video element already updated in playFromAlbum)
  fs.style.display = 'flex';
  fs.setAttribute('aria-hidden','false');
  // autoplay video when opening if there's a source
  if(fsVideo.src){
    // play video only if user interacts — many browsers block autoplay with audio, so we keep it muted if autoplay
    fsVideo.muted = true;
    fsVideo.play().catch(()=>{ /* ignore */ });
  }
}
function closeFullscreen(){
  fs.style.display = 'none';
  fs.setAttribute('aria-hidden','true');
  // pause background video
  if(fsVideo){
    fsVideo.pause();
  }
}

/* clicking overlay closes */
document.querySelector('#fullscreen-player .overlay').addEventListener('click', closeFullscreen);

/* seek on progress bar */
progressBar.addEventListener('click', (e) => {
  const rect = progressBar.getBoundingClientRect();
  const pct = (e.clientX - rect.left) / rect.width;
  if(audio.duration) audio.currentTime = pct * audio.duration;
});

/* ensure click on tracks updates UI highlight (optional) */
function highlightTracklist(){
  document.querySelectorAll('.track').forEach(tr => tr.classList.remove('active'));
  const selector = currentAlbum === 'radical' ? '#tracklist-radical' : '#tracklist-live';
  const list = document.querySelectorAll(selector + ' .track');
  if(list && list[currentIndex]) list[currentIndex].classList.add('active');
}

/* keyboard shortcuts (space = play/pause, left/right prev/next) */
document.addEventListener('keydown', (e) => {
  if(e.code === 'Space'){ e.preventDefault(); togglePlay(); }
  if(e.code === 'ArrowRight'){ playNext(); }
  if(e.code === 'ArrowLeft'){ playPrev(); }
});

/* initial: render both lists (done earlier). Nothing plays until user clicks a track. */

/* block right-click/copy as in original */
document.addEventListener('contextmenu', event => event.preventDefault());
document.addEventListener('copy', event => event.preventDefault());

/* small helper to ensure mini player color reset on page load */
(function initMiniStyle(){
  document.getElementById('mini-player').style.display = 'none';
})();

</script>
</body>
</html>
